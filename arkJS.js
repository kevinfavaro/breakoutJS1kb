z=()=>{p=1;n=-1;m=[...Array(9)].map((x,y)=>x=[...Array(9)].map((j,i)=>(y>1&y<5&i>1&i<7?'L':' ')));x=y=5;o=u=0;v=w=1;_=4};l=1;z();h=(l,t,r,d)=>{v*=(l&v==n)|(r&v==p)?n:p;w*=(t&w==n)|(d&w==p)?n:p;return l|t|r|d};k=(l,t)=>m[y+((y>0&t==n)|(y<8&t==p)?t:0)][x+((x>0&l==n)|(x<8&l==p)?l:0)]=='L'&((v==l)|(w==t));c=(l,d)=>w==d&v==l&k(l,d);dc=()=>{m[8].map((x,i)=>m[8][i]=(i>_-2&i<_+2?'=':' '));m[u][o]=' ';m[y<0?0:y][x<0?0:x]='o';dr();};f=()=>{if(y>7){sc=0;return z()};a=h(x<1,y<1,x>7,0);if(y==7&w==1)a=h(x==_+2,0,x==_-2,x>_-3&x<_+3);bx=x+v;by=y+w;bl=k(n,0)|k(p,0);bt=k(0,n)|k(0,p);a=h(k(n,0),k(0,n),k(p,0),k(0,p));b=0;if(!a&(c(n,n)|c(p,n)|c(n,p)|c(p,p))){bl=bt=1;b=h(c(n,n)|c(n,p),c(n,n)|c(p,n),c(p,n)|c(p,p),c(n,p)|c(p,p));}if(a|b){m[(bt&!bl)|(b&bt)?by:y][bl?bx:x]=' ';sc++;};return a|b};r=()=>{s=400-(l*5);dc();o=x;u=y;while(f());x=x+v;y=y+w;dc();i(r,s);if(sc/15==l){l++;z()}};i=setTimeout;document.addEventListener('keydown',e=>{q=e.keyCode;if(q==37)_-=(_>1?1:0);if(q==39){_+=(_<7?1:0);if(!s)i(r,1)}});i(dc,0);s=0;sc=0;
